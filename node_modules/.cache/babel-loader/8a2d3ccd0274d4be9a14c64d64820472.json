{"ast":null,"code":"import _slicedToArray from\"D:\\\\Users\\\\sagar\\\\Desktop\\\\projects\\\\React projects\\\\coronavirus\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useRef,useCallback}from\"react\";import*as d3 from\"d3\";import{connect}from\"react-redux\";import{getLiveStatsAction}from\"../../../store/actions/statActions\";var ActiveMiniGraph=function ActiveMiniGraph(props){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),timeseries=_useState2[0],setTimeseries=_useState2[1];var graphElement1=useRef(null);useEffect(function(){if(props.timeseries.length>1){setTimeseries(props.timeseries.slice(props.timeseries.length-25));}},[props.timeseries]);var graphData=useCallback(function(timeseries){if(timeseries.length<=1)return 0;var data=timeseries;var svg2=d3.select(graphElement1.current);var margin={top:20,right:10,bottom:30,left:0};var width=100-margin.left-margin.right;var height=100-margin.top-margin.bottom;var x=d3.scaleTime().domain(d3.extent(data,function(d){return new Date(d[\"date\"]+\"2020\");})).range([0,width]);var y1=d3.scaleLinear().domain([0,d3.max(data,function(d){return+d[\"dailyconfirmed\"];})]).range([height,0]);var path2=svg2.append(\"path\").datum(data).attr(\"fill\",\"none\").attr(\"cursor\",\"pointer\").attr(\"stroke\",\"#007bff99\").attr(\"stroke-width\",2).attr(\"cursor\",\"pointer\").attr(\"cursor\",\"pointer\").attr(\"d\",d3.line().x(function(d){return x(new Date(d[\"date\"]+\"2020\"));}).y(function(d,i){if(i===0){return y1(d[\"dailyconfirmed\"]-d[\"dailyrecovered\"]-d[\"dailydeceased\"]);}else{return y1(d[\"dailyconfirmed\"]-d[\"dailyrecovered\"]-d[\"dailydeceased\"]);}}).curve(d3.curveCardinal));var totalLength2=path2.node().getTotalLength();path2.attr(\"stroke-dasharray\",totalLength2+\" \"+totalLength2).attr(\"stroke-dashoffset\",totalLength2).transition().duration(props.animate?2000:0).attr(\"stroke-dashoffset\",0);svg2.selectAll(\".dot\").data(data.slice(data.length-1)).enter().append(\"circle\").attr(\"fill\",\"#007bff\").attr(\"stroke\",\"#007bff\").attr(\"r\",2).attr(\"cursor\",\"pointer\").attr(\"cx\",function(d){return x(new Date(d[\"date\"]+\"2020\"));}).attr(\"cy\",function(d){/* const today =\r\n          data[data.length - 1]['dailyconfirmed'] -\r\n          data[data.length - 1]['dailyrecovered'] -\r\n          data[data.length - 1]['dailydeceased'];\r\n        const yesterday =\r\n          data[data.length - 2]['dailyconfirmed'] -\r\n          data[data.length - 2]['dailyrecovered'] -\r\n          data[data.length - 2]['dailydeceased'];*/return y1(d[\"dailyconfirmed\"]-d[\"dailyrecovered\"]-d[\"dailydeceased\"]);}).on(\"mouseover\",function(d){d3.select(d3.event.target).attr(\"r\",\"5\");}).on(\"mouseout\",function(d){d3.select(d3.event.target).attr(\"r\",\"2\");}).style(\"opacity\",0).transition().duration(props.animate?3000:0).style(\"opacity\",1);},[props.animate]);useEffect(function(){graphData(timeseries);},[timeseries,graphData]);return/*#__PURE__*/React.createElement(\"div\",{className:\"Minigraph\"},/*#__PURE__*/React.createElement(\"div\",{className:\"svg-parent fadeInUp\",style:{animationDelay:\"0.6s\"}},/*#__PURE__*/React.createElement(\"svg\",{ref:graphElement1,width:\"200\",height:\"130\",viewBox:\"0 0 100 70\",preserveAspectRatio:\"xMidYMid meet\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"svg-parent is-blue fadeInUp\",style:{animationDelay:\"0.7s\"}}));};var mapStateToProps=function mapStateToProps(state){return{timeseries:state.stats.timeSeries};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{getLiveStats:function getLiveStats(){return dispatch(getLiveStatsAction());}};};export default connect(mapStateToProps,mapDispatchToProps)(ActiveMiniGraph);","map":{"version":3,"sources":["D:/Users/sagar/Desktop/projects/React projects/coronavirus/src/components/home/minigraphs/ActiveMiniGraph.js"],"names":["React","useState","useEffect","useRef","useCallback","d3","connect","getLiveStatsAction","ActiveMiniGraph","props","timeseries","setTimeseries","graphElement1","length","slice","graphData","data","svg2","select","current","margin","top","right","bottom","left","width","height","x","scaleTime","domain","extent","d","Date","range","y1","scaleLinear","max","path2","append","datum","attr","line","y","i","curve","curveCardinal","totalLength2","node","getTotalLength","transition","duration","animate","selectAll","enter","on","event","target","style","animationDelay","mapStateToProps","state","stats","timeSeries","mapDispatchToProps","dispatch","getLiveStats"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef, useCallback } from \"react\";\r\nimport * as d3 from \"d3\";\r\nimport { connect } from \"react-redux\";\r\nimport { getLiveStatsAction } from \"../../../store/actions/statActions\";\r\n\r\nconst ActiveMiniGraph = (props) => {\r\n  const [timeseries, setTimeseries] = useState([]);\r\n  const graphElement1 = useRef(null);\r\n\r\n  useEffect(() => {\r\n    if (props.timeseries.length > 1) {\r\n      setTimeseries(props.timeseries.slice(props.timeseries.length - 25));\r\n    }\r\n  }, [props.timeseries]);\r\n\r\n  const graphData = useCallback(\r\n    (timeseries) => {\r\n      if (timeseries.length <= 1) return 0;\r\n      const data = timeseries;\r\n      const svg2 = d3.select(graphElement1.current);\r\n      const margin = { top: 20, right: 10, bottom: 30, left: 0 };\r\n      const width = 100 - margin.left - margin.right;\r\n      const height = 100 - margin.top - margin.bottom;\r\n\r\n      const x = d3\r\n        .scaleTime()\r\n        .domain(\r\n          d3.extent(data, function (d) {\r\n            return new Date(d[\"date\"] + \"2020\");\r\n          })\r\n        )\r\n        .range([0, width]);\r\n\r\n      const y1 = d3\r\n        .scaleLinear()\r\n        .domain([\r\n          0,\r\n          d3.max(data, function (d) {\r\n            return +d[\"dailyconfirmed\"];\r\n          }),\r\n        ])\r\n        .range([height, 0]);\r\n\r\n      const path2 = svg2\r\n        .append(\"path\")\r\n        .datum(data)\r\n        .attr(\"fill\", \"none\")\r\n        .attr(\"cursor\", \"pointer\")\r\n        .attr(\"stroke\", \"#007bff99\")\r\n        .attr(\"stroke-width\", 2)\r\n        .attr(\"cursor\", \"pointer\")\r\n        .attr(\"cursor\", \"pointer\")\r\n        .attr(\r\n          \"d\",\r\n          d3\r\n            .line()\r\n            .x(function (d) {\r\n              return x(new Date(d[\"date\"] + \"2020\"));\r\n            })\r\n            .y(function (d, i) {\r\n              if (i === 0) {\r\n                return y1(\r\n                  d[\"dailyconfirmed\"] - d[\"dailyrecovered\"] - d[\"dailydeceased\"]\r\n                );\r\n              } else {\r\n                return y1(\r\n                  d[\"dailyconfirmed\"] - d[\"dailyrecovered\"] - d[\"dailydeceased\"]\r\n                );\r\n              }\r\n            })\r\n            .curve(d3.curveCardinal)\r\n        );\r\n\r\n      const totalLength2 = path2.node().getTotalLength();\r\n      path2\r\n        .attr(\"stroke-dasharray\", totalLength2 + \" \" + totalLength2)\r\n        .attr(\"stroke-dashoffset\", totalLength2)\r\n        .transition()\r\n        .duration(props.animate ? 2000 : 0)\r\n        .attr(\"stroke-dashoffset\", 0);\r\n\r\n      svg2\r\n        .selectAll(\".dot\")\r\n        .data(data.slice(data.length - 1))\r\n        .enter()\r\n        .append(\"circle\")\r\n        .attr(\"fill\", \"#007bff\")\r\n        .attr(\"stroke\", \"#007bff\")\r\n        .attr(\"r\", 2)\r\n        .attr(\"cursor\", \"pointer\")\r\n        .attr(\"cx\", function (d) {\r\n          return x(new Date(d[\"date\"] + \"2020\"));\r\n        })\r\n        .attr(\"cy\", function (d) {\r\n          /* const today =\r\n          data[data.length - 1]['dailyconfirmed'] -\r\n          data[data.length - 1]['dailyrecovered'] -\r\n          data[data.length - 1]['dailydeceased'];\r\n        const yesterday =\r\n          data[data.length - 2]['dailyconfirmed'] -\r\n          data[data.length - 2]['dailyrecovered'] -\r\n          data[data.length - 2]['dailydeceased'];*/\r\n          return y1(\r\n            d[\"dailyconfirmed\"] - d[\"dailyrecovered\"] - d[\"dailydeceased\"]\r\n          );\r\n        })\r\n        .on(\"mouseover\", (d) => {\r\n          d3.select(d3.event.target).attr(\"r\", \"5\");\r\n        })\r\n        .on(\"mouseout\", (d) => {\r\n          d3.select(d3.event.target).attr(\"r\", \"2\");\r\n        })\r\n        .style(\"opacity\", 0)\r\n        .transition()\r\n        .duration(props.animate ? 3000 : 0)\r\n        .style(\"opacity\", 1);\r\n    },\r\n    [props.animate]\r\n  );\r\n\r\n  useEffect(() => {\r\n    graphData(timeseries);\r\n  }, [timeseries, graphData]);\r\n\r\n  return (\r\n    <div className=\"Minigraph\">\r\n      <div className=\"svg-parent fadeInUp\" style={{ animationDelay: \"0.6s\" }}>\r\n        <svg\r\n          ref={graphElement1}\r\n          width=\"200\"\r\n          height=\"130\"\r\n          viewBox=\"0 0 100 70\"\r\n          preserveAspectRatio=\"xMidYMid meet\"\r\n        />\r\n      </div>\r\n\r\n      <div\r\n        className=\"svg-parent is-blue fadeInUp\"\r\n        style={{ animationDelay: \"0.7s\" }}\r\n      ></div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    timeseries: state.stats.timeSeries,\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    getLiveStats: () => dispatch(getLiveStatsAction()),\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ActiveMiniGraph);\r\n"]},"metadata":{},"sourceType":"module"}